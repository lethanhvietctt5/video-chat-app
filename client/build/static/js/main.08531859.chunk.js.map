{"version":3,"sources":["../node_modules/peerjs/dist sync","api/index.js","api/token.js","redux/slices/auth.js","components/Home.js","components/Login.js","components/Register.js","components/Message.js","components/Room.js","components/Join.js","components/Loading.js","App.js","redux/store.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","api","axios","create","baseURL","process","headers","interceptors","response","use","res","err","status","Promise","reject","setToken","token","defaults","common","localStorage","setItem","removeItem","fetchUser","createAsyncThunk","a","get","data","userLogin","email","password","post","authSlice","createSlice","name","initialState","isAuthenticated","user","loading","reducers","authLogout","state","action","extraReducers","builder","addCase","pending","fulfilled","payload","message","rejected","actions","Home","useState","setId","useSelector","auth","dispatch","useDispatch","useEffect","uuidv4","className","to","width","height","viewBox","d","fill","onClick","Login","setEmail","setPassword","authStatus","handleOnChange","event","target","value","onSubmit","preventDefault","htmlFor","type","placeholder","onChange","Register","form","setForm","regSucceed","setRegSuccess","handleChange","autoComplete","then","msg","Message","room","socket","messages","setMessages","setMessage","on","element","document","getElementById","scrollTop","scrollHeight","off","map","item","index","renderMessage","emit","updateStream","userPeers","videos","arr","i","childNodes","length","includes","push","playStream","stream","isLocal","video","createElement","div","srcObject","muted","isPlaying","currentTime","paused","ended","readyState","HAVE_CURRENT_DATA","playPromise","play","undefined","_","catch","error","console","log","appendChild","Room","loadingStatus","useParams","streamLocal","setStreamLocal","io","transports","upgrade","peerId","setPeerId","members","setMembers","Peer","config","iceServers","urls","username","credential","peer","peerID","innerHTML","navigator","mediaDevices","getUserMedia","audio","getTracks","forEach","track","stop","member","call","remoteStream","answer","disconnect","opacity","Join","Loading","xmlns","xlink","role","preserveAspectRatio","App","checkBeforeRender","setCheckBeforeRender","getItem","path","exact","component","store","configureStore","reducer","authReducer","middleware","getDefaultMiddleware","serializableCheck","devTools","ReactDOM","render"],"mappings":"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","file":"static/js/main.08531859.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 97;","import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_HOST_URL,\r\n  headers: { \"Content-Type\": \"application/json; charset=UTF-8\" },\r\n});\r\n\r\napi.interceptors.response.use(\r\n  (res) => res,\r\n  (err) => {\r\n    if (err.response.status === 401) {\r\n      // store.dispatch({ type: LOGOUT });\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default api;\r\n","import api from \"./index\";\r\n\r\nconst setToken = (token) => {\r\n  if (token) {\r\n    api.defaults.headers.common[\"x-auth-token\"] = token;\r\n    localStorage.setItem(\"token\", token);\r\n  } else {\r\n    delete api.defaults.headers.common[\"x-auth-token\"];\r\n    localStorage.removeItem(\"token\");\r\n  }\r\n};\r\n\r\nconst getToken = () => {\r\n  return localStorage.getItem(\"token\");\r\n};\r\n\r\nexport { setToken, getToken };\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport api from \"api\";\r\nimport { setToken } from \"api/token\";\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  user: null,\r\n  loading: false,\r\n};\r\n\r\nexport const fetchUser = createAsyncThunk(\"auth/fetchUser\", async () => {\r\n  const response = await api.get(\"/auth\");\r\n  return response.data;\r\n});\r\n\r\nexport const userLogin = createAsyncThunk(\r\n  \"auth/userLogin\",\r\n  async ({ email, password }) => {\r\n    const response = await api.post(\"/login\", { email, password });\r\n    return response.data;\r\n  }\r\n);\r\n\r\nconst authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    authLogout(state, action) {\r\n      state.loading = false;\r\n      state.isAuthenticated = false;\r\n      state.user = null;\r\n      setToken(\"\");\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchUser.pending, (state, action) => {\r\n        state.loading = true;\r\n        state.isAuthenticated = false;\r\n      })\r\n      .addCase(fetchUser.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        if (!action.payload.message) {\r\n          state.isAuthenticated = true;\r\n          state.user = action.payload.user;\r\n        }\r\n      })\r\n      .addCase(fetchUser.rejected, (state, action) => {\r\n        state.loading = false;\r\n      })\r\n      .addCase(userLogin.pending, (state, action) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(userLogin.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        if (!action.payload.message) {\r\n          setToken(action.payload.token);\r\n          state.user = action.payload.user;\r\n          state.isAuthenticated = true;\r\n        }\r\n      })\r\n      .addCase(userLogin.rejected, (state, action) => {\r\n        state.loading = false;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { authLogout } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;\r\n","import { Link, Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { authLogout } from \"redux/slices/auth\";\r\n\r\nfunction Home() {\r\n  let [id, setId] = useState();\r\n  const user = useSelector((state) => state.auth.user);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setId(uuidv4());\r\n  }, []);\r\n\r\n  if (!user) return <Redirect to=\"/login\" />;\r\n\r\n  return (\r\n    <div className=\"flex h-full bg-img-background bg-cover bg-no-repeat w-full justify-center items-center\">\r\n      <div className=\"flex w-1/2 h-full items-center justify-center\">\r\n        <div className=\"w-3/4\">\r\n          <div className=\"flex justify-center\">\r\n            <Link to={`/join`} className=\"flex justify-end min-w-3/4 mr-6\">\r\n              <button className=\"justify-center flex min-w-1/2 items-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full focus:outline-none\">\r\n                <svg width=\"2em\" height=\"2em\" viewBox=\"0 0 24 24\">\r\n                  <path\r\n                    d=\"M3.7 7.7a.996.996 0 0 1 1.41 0L12 14.59l4.29-4.3L14.7 8.7c-.62-.62-.18-1.7.71-1.7H20c.55 0 1 .45 1 1v4.59c0 .89-1.08 1.34-1.71.71l-1.59-1.59l-5 5a.996.996 0 0 1-1.41 0L3.7 9.11c-.38-.38-.38-1.02 0-1.41z\"\r\n                    fill=\"currentColor\"\r\n                  ></path>\r\n                </svg>\r\n                <div>Join meeting</div>\r\n              </button>\r\n            </Link>\r\n\r\n            <Link\r\n              to={`/rooms/${id}`}\r\n              className=\"flex justify-start min-w-3/4 ml-6\"\r\n            >\r\n              <button className=\"justify-center focus:outline-none min-w-1/2 flex items-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\">\r\n                <svg width=\"2em\" height=\"2em\" viewBox=\"0 0 24 24\">\r\n                  <path\r\n                    d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\r\n                    fill=\"currentColor\"\r\n                  ></path>\r\n                </svg>\r\n                <div>\r\n                  <div>Create a meeting</div>\r\n                </div>\r\n              </button>\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"flex justify-center mt-6\">\r\n            <div className=\"text-white text-xl text hover:underline cursor-pointer\">\r\n              <button\r\n                className=\"focus:outline-none\"\r\n                onClick={() => dispatch(authLogout())}\r\n              >\r\n                Logout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { userLogin } from \"redux/slices/auth\";\r\n\r\nfunction Login() {\r\n  let [email, setEmail] = useState(\"\");\r\n  let [password, setPassword] = useState(\"\");\r\n\r\n  const authStatus = useSelector((state) => state.auth.isAuthenticated);\r\n  const dispatch = useDispatch();\r\n\r\n  function handleOnChange(event) {\r\n    if (event.target.id === \"email\") setEmail(event.target.value);\r\n    else setPassword(event.target.value);\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    dispatch(userLogin({ email, password }));\r\n  }\r\n\r\n  if (authStatus) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full bg-img-background bg-cover bg-no-repeat\">\r\n      <div className=\"w-full h-full flex justify-center items-center md:block\">\r\n        <div className=\"h-full md:w-1/3 w-3/4 min-w-min px-3 bg-white bg-opacity-50 shadow-2xl flex items-center justify-center\">\r\n          <form\r\n            className=\"flex flex-col items-center justify-center sm:justify-start rounded\"\r\n            onSubmit={handleSubmit}\r\n          >\r\n            <div className=\"flex flex-col justify-center text-xl\">\r\n              <div className=\"text-6xl md:text-4xl xl:text-5xl 2xl:text-7xl mb-12 flex justify-center\">\r\n                Sign in\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 font-bold mb-2\"\r\n                  htmlFor=\"email\"\r\n                >\r\n                  Email\r\n                </label>\r\n                <input\r\n                  className=\"shadow text-lg appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  placeholder=\"Email\"\r\n                  onChange={handleOnChange}\r\n                  value={email}\r\n                />\r\n              </div>\r\n              <div className=\"\">\r\n                <label\r\n                  className=\"block text-gray-700 font-bold mb-2\"\r\n                  htmlFor=\"password\"\r\n                >\r\n                  Password\r\n                </label>\r\n                <input\r\n                  className=\"shadow text-lg appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  placeholder=\"******************\"\r\n                  onChange={handleOnChange}\r\n                  value={password}\r\n                />\r\n              </div>\r\n              <div className=\"flex text-xs xl:text-sm 2xl:text-base\">\r\n                <div className=\"text-black text-opacity-60 mr-2\">\r\n                  If you don't have account ?\r\n                </div>\r\n                <div>\r\n                  <Link to=\"/register\" className=\"text-blue-500\">\r\n                    Sign up\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center justify-center mt-2\">\r\n                <button\r\n                  className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n                  type=\"submit\"\r\n                >\r\n                  Sign In\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { Link, Redirect } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport api from \"api\";\r\n\r\nfunction Register() {\r\n  let [form, setForm] = useState({});\r\n  const [regSucceed, setRegSuccess] = useState(false);\r\n\r\n  function handleChange(e) {\r\n    setForm({ ...form, [e.target.id]: e.target.value });\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    api.post(\"/register\", { ...form }).then((response) => {\r\n      if (response.msg) {\r\n      } else {\r\n        setRegSuccess(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (regSucceed) {\r\n    return <Redirect to=\"/login\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full bg-img-background bg-cover bg-no-repeat flex justify-center md:block\">\r\n      <div className=\"h-full w-3/4 md:w-1/3 items-center flex justify-center bg-white bg-opacity-50 shadow-2xl rounded px-4\">\r\n        <form\r\n          className=\"max-w-lg text-xl\"\r\n          autoComplete=\"off\"\r\n          onSubmit={handleSubmit}\r\n        >\r\n          <div className=\"text-6xl md:text-4xl xl:text-5xl 2xl:text-7xl mb-12 flex justify-center\">\r\n            Sign up\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n              htmlFor=\"name\"\r\n            >\r\n              Full name\r\n            </label>\r\n            <input\r\n              className=\"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white\"\r\n              id=\"name\"\r\n              type=\"text\"\r\n              placeholder=\"Name\"\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              className=\"block text-gray-700 font-bold mb-2\"\r\n              htmlFor=\"email\"\r\n            >\r\n              Email\r\n            </label>\r\n            <input\r\n              className=\"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white\"\r\n              id=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-wrap -mx-3\">\r\n            <div className=\"w-full px-3\">\r\n              <label\r\n                className=\"block tracking-wide text-gray-700 font-bold mb-2\"\r\n                htmlFor=\"password\"\r\n              >\r\n                Password\r\n              </label>\r\n              <input\r\n                className=\"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white\"\r\n                id=\"password\"\r\n                type=\"password\"\r\n                placeholder=\"******************\"\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex text-xs xl:text-sm 2xl:text-base mb-1\">\r\n            <div className=\"text-black text-opacity-60 mr-2\">\r\n              If you have account ?\r\n            </div>\r\n            <div>\r\n              <Link to=\"/login\" className=\"text-blue-500\">\r\n                Login\r\n              </Link>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-center\">\r\n            <button\r\n              className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n              type=\"submit\"\r\n            >\r\n              Sign up\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nfunction Message({ room, socket }) {\r\n  let [messages, setMessages] = useState([]);\r\n  let [message, setMessage] = useState(\"\");\r\n  const user = useSelector((state) => state.auth.user);\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on(\"message\", (message) => {\r\n        setMessages([...messages, message]);\r\n        let element = document.getElementById(\"messages\");\r\n        element.scrollTop = element.scrollHeight;\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      socket?.off(\"message\");\r\n    };\r\n  });\r\n\r\n  function handleInput(e) {\r\n    e.preventDefault();\r\n    setMessage(e.target.value);\r\n  }\r\n\r\n  function handleSendMessage(e) {\r\n    e.preventDefault();\r\n    if (message && socket) {\r\n      socket.emit(\"sendMessage\", { name: user.name, msg: message, room });\r\n      setMessage(\"\");\r\n    }\r\n  }\r\n\r\n  function renderMessage(item, index) {\r\n    if (item.name !== \"Admin\")\r\n      return (\r\n        <div\r\n          key={index}\r\n          className={\r\n            item.name === user.name ? \"flex justify-end\" : \"flex justify-start\"\r\n          }\r\n        >\r\n          <div\r\n            key={index}\r\n            className={\r\n              item.name === user.name\r\n                ? \"w-auto max-w-full inline-block p-2 rounded-xl bg-blue-500 my-1 text-white\"\r\n                : \"w-auto max-w-full inline-block p-2 rounded-xl bg-gray-400 my-1\"\r\n            }\r\n          >\r\n            <p className=\"text-xs font-bold w-auto max-w-full\">{item.name}</p>\r\n            <p className=\"w-auto max-w-full\">{item.msg}</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    return (\r\n      <div key={index} className=\"flex justify-center text-gray-400\">\r\n        {item.msg}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div id=\"messArea\" className=\"w-full\">\r\n      <div className=\"h-full mx-2\">\r\n        <div\r\n          id=\"messages\"\r\n          className=\"h-full text-sm pt-2 overflow-y-auto no-scrollbar\"\r\n        >\r\n          <div className=\"\">\r\n            {messages?.map((item, index) => renderMessage(item, index))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"fixed bottom-0 w-1/4 h-16 bg-white\">\r\n        <form\r\n          className=\"w-full h-full flex border-t py-2 items-center justify-between\"\r\n          onSubmit={handleSendMessage}\r\n        >\r\n          <div className=\"h-full w-10/12 p-2 flex items-center\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"message\"\r\n              autoComplete=\"off\"\r\n              placeholder=\"Enter message ...\"\r\n              value={message}\r\n              onChange={handleInput}\r\n              className=\"h-full w-full text-xs no-scrollbar resize-none outline-none border-gray-400 border rounded-lg p-2\"\r\n            />\r\n          </div>\r\n          <div className=\"h-full flex items-center w-2/12 mr-2 py-2\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"focus:outline-none px-2 py-1 bg-blue-700 text-white rounded-lg\"\r\n            >\r\n              Send\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import { useParams } from \"react-router\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useEffect, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport Peer from \"peerjs\";\r\nimport Message from \"components/Message\";\r\n\r\nconst END_POINT = process.env.REACT_APP_HOST_URL;\r\n\r\nfunction updateStream(userPeers) {\r\n  let videos = document.getElementById(\"videoContainer\");\r\n  if (videos) {\r\n    let arr = [];\r\n    for (let i = 0; i < videos.childNodes.length; i++) {\r\n      if (!userPeers.includes(videos.childNodes[i].id)) {\r\n        arr.push(videos.childNodes[i]);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction playStream(id, stream, isLocal = false) {\r\n  if (!document.getElementById(id)) {\r\n    let video = document.createElement(\"video\");\r\n    let div = document.createElement(\"div\");\r\n    let videos = document.getElementById(\"videoContainer\");\r\n\r\n    div.className = \"max-w-full min-w-min flex justify-center items-center\";\r\n    video.srcObject = stream;\r\n    if (isLocal) {\r\n      video.muted = \"muted\";\r\n    }\r\n    div.id = id;\r\n    let isPlaying = video.currentTime > 0 && !video.paused && !video.ended && video.readyState > video.HAVE_CURRENT_DATA;\r\n    if (!isPlaying) {\r\n      var playPromise = video.play();\r\n      if (playPromise !== undefined) {\r\n        playPromise\r\n          .then((_) => {})\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n      }\r\n      div.appendChild(video);\r\n      if (videos) videos.appendChild(div);\r\n    }\r\n  }\r\n}\r\n\r\nfunction Room() {\r\n  const loadingStatus = useSelector((state) => state.auth.loading);\r\n  const authStatus = useSelector((state) => state.auth.isAuthenticated);\r\n  const [room] = useState(useParams().id);\r\n  const user = useSelector((state) => state.auth.user);\r\n  const [streamLocal, setStreamLocal] = useState(null);\r\n\r\n  const [socket] = useState(() =>\r\n    io(END_POINT, {\r\n      transports: [\"websocket\"],\r\n      upgrade: false,\r\n    })\r\n  );\r\n  const [peerId, setPeerId] = useState();\r\n  const [members, setMembers] = useState([]);\r\n  const [peer] = useState(\r\n    () =>\r\n      new Peer({\r\n        config: {\r\n          iceServers: [\r\n            { urls: [process.env.REACT_APP_ICE_URL] },\r\n            {\r\n              username: process.env.REACT_APP_ICE_USER,\r\n              credential: process.env.REACT_APP_ICE_CREDENTIALS,\r\n              urls: [\r\n                \"turn:hk-turn1.xirsys.com:80?transport=udp\",\r\n                \"turn:hk-turn1.xirsys.com:3478?transport=udp\",\r\n                \"turn:hk-turn1.xirsys.com:80?transport=tcp\",\r\n                \"turn:hk-turn1.xirsys.com:3478?transport=tcp\",\r\n                \"turns:hk-turn1.xirsys.com:443?transport=tcp\",\r\n                \"turns:hk-turn1.xirsys.com:5349?transport=tcp\",\r\n              ],\r\n            },\r\n          ],\r\n        },\r\n      })\r\n  );\r\n\r\n  useEffect(() => {\r\n    // Peer connect\r\n    peer?.on(\"open\", (id) => {\r\n      setPeerId(id);\r\n\r\n      // User join to room\r\n      socket.emit(\"joinRoom\", { name: user?.name, room, peerID: id });\r\n\r\n      // Notify to all members in the room\r\n      socket.on(\"allMembers\", (userPeers) => {\r\n        let videos = document.getElementById(\"videoContainer\");\r\n        if (videos) videos.innerHTML = \"\";\r\n        navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then((stream) => {\r\n          streamLocal?.getTracks().forEach((track) => track.stop());\r\n          setStreamLocal(stream);\r\n          // Play local stream and call stream to other users\r\n          playStream(id, stream, true);\r\n          userPeers.forEach((member) => {\r\n            if (member !== id) {\r\n              let call = peer.call(member, stream);\r\n              call?.on(\"stream\", (remoteStream) => {\r\n                playStream(member, remoteStream);\r\n              });\r\n            }\r\n          });\r\n          updateStream(userPeers);\r\n        });\r\n\r\n        // Answer\r\n        peer.on(\"call\", (call) => {\r\n          if (videos) videos.innerHTML = \"\";\r\n          navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then((stream) => {\r\n            setStreamLocal(stream);\r\n            call.answer(stream);\r\n            playStream(id, stream, true);\r\n            userPeers.forEach((member) => {\r\n              if (member !== id) {\r\n                call?.on(\"stream\", (remoteStream) => {\r\n                  playStream(member, remoteStream);\r\n                });\r\n              }\r\n            });\r\n            updateStream(userPeers);\r\n          });\r\n        });\r\n\r\n        setMembers(userPeers);\r\n      });\r\n    });\r\n  }, [socket, room, user, peer, members, streamLocal]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      socket?.emit(\"peerClose\", { peerId });\r\n    };\r\n  }, [socket, peerId]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      streamLocal?.getTracks().forEach((track) => track.stop());\r\n    };\r\n  }, [streamLocal]);\r\n\r\n  useEffect(() => {\r\n    updateStream(members);\r\n  }, [members]);\r\n\r\n  if (!authStatus && !loadingStatus) {\r\n    return <Redirect to=\"/login\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full flex\">\r\n      <div\r\n        className=\"w-full sm:w-3/4 h-full no-scrollbar grid grid-cols-2 gap-2 overflow-y-scroll bg-black bg-opacity-90 p-2\"\r\n        id=\"videoContainer\"\r\n      ></div>\r\n      <div className=\"w-1/4 hidden sm:block h-full border-l border-gray-300\">\r\n        <div className=\"w-full h-16 flex justify-around items-center border-b\">\r\n          <button className=\"flex flex-col justify-center items-center p-1 rounded-lg hover:bg-blue-100\">\r\n            <div>\r\n              <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\r\n                <path\r\n                  opacity=\".3\"\r\n                  d=\"M20 16V6H4v10.01L20 16zm-7-1.53v-2.19c-2.78 0-4.61.85-6 2.72c.56-2.67 2.11-5.33 6-5.87V7l4 3.73l-4 3.74z\"\r\n                  fill=\"currentColor\"\r\n                ></path>\r\n                <path\r\n                  d=\"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zM4 16V6h16v10.01L4 16zm9-6.87c-3.89.54-5.44 3.2-6 5.87c1.39-1.87 3.22-2.72 6-2.72v2.19l4-3.74L13 7v2.13z\"\r\n                  fill=\"currentColor\"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n            <div className=\"text-xs\">Screen</div>\r\n          </button>\r\n\r\n          <button className=\"flex flex-col justify-center items-center p-1 rounded-lg hover:bg-blue-100\">\r\n            <div>\r\n              <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 256 256\">\r\n                <path\r\n                  d=\"M213.382 221.92a8.002 8.002 0 0 1-11.302-.538l-26.46-29.106A79.72 79.72 0 0 1 136 207.59V232a8 8 0 0 1-16 0v-24.403a79.837 79.837 0 0 1-71.512-70.718a8 8 0 0 1 15.903-1.758a63.992 63.992 0 0 0 100.396 45.238l-10.875-11.962A47.99 47.99 0 0 1 80 128V87.094L42.08 45.382a8 8 0 1 1 11.84-10.764l160 176a8.002 8.002 0 0 1-.538 11.302zm-51.302-92.11A8 8 0 0 0 176 124.43V64a48.005 48.005 0 0 0-88.845-25.225a8.001 8.001 0 0 0 .884 9.591zm30.085 31.855a7.993 7.993 0 0 0 10.364-4.536a79.616 79.616 0 0 0 4.983-20.25a8 8 0 0 0-15.903-1.758a63.674 63.674 0 0 1-3.98 16.18a8 8 0 0 0 4.536 10.364z\"\r\n                  fill=\"currentColor\"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n            <div className=\"text-xs\">Micro</div>\r\n          </button>\r\n\r\n          <button className=\"flex flex-col justify-center items-center p-1 rounded-lg hover:bg-blue-100\">\r\n            <div>\r\n              <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\r\n                <path\r\n                  d=\"M12 2a7 7 0 0 1 7 7a7 7 0 0 1-7 7a7 7 0 0 1-7-7a7 7 0 0 1 7-7m0 2a5 5 0 0 0-5 5a5 5 0 0 0 5 5a5 5 0 0 0 5-5a5 5 0 0 0-5-5m0 2a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3M6 22a2 2 0 0 1-2-2c0-.38.1-.73.29-1.03l1.82-3.16A9.007 9.007 0 0 0 12 18c2.25 0 4.31-.83 5.89-2.19l1.82 3.16c.19.3.29.65.29 1.03a2 2 0 0 1-2 2H6z\"\r\n                  fill=\"currentColor\"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n            <div className=\"text-xs\">Webcam</div>\r\n          </button>\r\n        </div>\r\n        <Message room={room} socket={socket} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Room;\r\n","import { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Join() {\r\n  let [id, setId] = useState();\r\n\r\n  function handleChange(e) {\r\n    e.preventDefault();\r\n    setId(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full flex justify-center items-center bg-img-background bg-cover bg-no-repeat\">\r\n      <div>\r\n        <div>\r\n          <form>\r\n            <input name=\"id\" type=\"text\" onChange={handleChange} placeholder=\"Enter room's id ...\" className=\"rounded-lg p-2 focus:outline-none\" />\r\n            <Link to={`/rooms/${id}`}>\r\n              <button type=\"submit\" className=\"bg-blue-500 text-white ml-4 text-lg py-2 px-3 rounded-xl\">\r\n                JOIN\r\n              </button>\r\n            </Link>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Join;\r\n","function Loading() {\r\n  return (\r\n    <div className=\"w-full h-full flex justify-center items-center text-white bg-img-background bg-cover bg-no-repeat\">\r\n      <div>\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          xlink=\"http://www.w3.org/1999/xlink\"\r\n          aria-hidden=\"true\"\r\n          role=\"img\"\r\n          className=\"animate-spin iconify iconify--mdi-light\"\r\n          width=\"200\"\r\n          height=\"200\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            d=\"M11.5 4A8.5 8.5 0 0 0 3 12.5H2A9.5 9.5 0 0 1 11.5 3v1z\"\r\n            fill=\"currentColor\"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loading;\r\n","import { Route, Switch } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Home from \"components/Home\";\r\nimport Login from \"components/Login\";\r\nimport Register from \"components/Register\";\r\nimport Room from \"components/Room\";\r\nimport Join from \"components/Join\";\r\nimport { setToken, getToken } from \"api/token\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { fetchUser } from \"redux/slices/auth\";\r\nimport Loading from \"components/Loading\";\r\n\r\nfunction App() {\r\n  const loading = useSelector((state) => state.auth.loading);\r\n  const dispatch = useDispatch();\r\n  const [checkBeforeRender, setCheckBeforeRender] = useState(true);\r\n\r\n  useEffect(() => {\r\n    let token = getToken();\r\n    setToken(token);\r\n    dispatch(fetchUser());\r\n    setCheckBeforeRender(false);\r\n  }, [dispatch]);\r\n\r\n  if (loading || checkBeforeRender) {\r\n    return <Loading />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"App h-full font-custom\">\r\n      <Switch>\r\n        <Route path=\"/login\" exact component={Login} />\r\n        <Route path=\"/register\" exact component={Register} />\r\n        <Route path=\"/rooms/:id\" component={Room} />\r\n        <Route path=\"/join\" exact component={Join} />\r\n        <Route path=\"/\" exact component={Home} />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport { getDefaultMiddleware } from \"@reduxjs/toolkit\";\r\nimport authReducer from \"./slices/auth\";\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    auth: authReducer,\r\n  },\r\n  middleware: getDefaultMiddleware({\r\n    serializableCheck: false,\r\n  }),\r\n  devTools: process.env.NODE_ENV !== \"production\",\r\n});\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport store from \"redux/store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nReactDOM.render(\r\n  <Router>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </Router>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}