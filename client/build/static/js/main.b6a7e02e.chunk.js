(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{66:function(e,t,n){},97:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=97},98:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(34),l=n.n(a),s=n(14),r=(n(66),n(4)),i=n(3),o=n(9),u=n(100),d=n(41),b=n(33),j=n.n(b),m=n(24),x=n(54),h=n.n(x).a.create({baseURL:"https://room-call-chat-app.herokuapp.com",headers:{"Content-Type":"application/json; charset=UTF-8"}});h.interceptors.response.use((function(e){return e}),(function(e){return e.response.status,Promise.reject(e)}));var f=h,g=function(e){e?(f.defaults.headers.common["x-auth-token"]=e,localStorage.setItem("token",e)):(delete f.defaults.headers.common["x-auth-token"],localStorage.removeItem("token"))},p=Object(m.b)("auth/fetchUser",Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/auth");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),O=Object(m.b)("auth/userLogin",function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,c=t.password,e.next=3,f.post("/login",{email:n,password:c});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=Object(m.c)({name:"auth",initialState:{isAuthenticated:!1,user:null,loading:!1},reducers:{authLogout:function(e,t){e.loading=!1,e.isAuthenticated=!1,e.user=null,g("")}},extraReducers:function(e){e.addCase(p.pending,(function(e,t){e.loading=!0,e.isAuthenticated=!1})).addCase(p.fulfilled,(function(e,t){e.loading=!1,t.payload.message||(e.isAuthenticated=!0,e.user=t.payload.user)})).addCase(p.rejected,(function(e,t){e.loading=!1})).addCase(O.pending,(function(e,t){e.loading=!0})).addCase(O.fulfilled,(function(e,t){e.loading=!1,t.payload.message||(g(t.payload.token),e.user=t.payload.user,e.isAuthenticated=!0)})).addCase(O.rejected,(function(e,t){e.loading=!1}))}}),w=v.actions.authLogout,y=v.reducer,N=n(0);var k=function(){var e=Object(c.useState)(),t=Object(r.a)(e,2),n=t[0],a=t[1],l=Object(o.c)((function(e){return e.auth.user})),d=Object(o.b)();return Object(c.useEffect)((function(){a(Object(u.a)())}),[]),l?Object(N.jsx)("div",{className:"flex h-full bg-img-background bg-cover bg-no-repeat w-full justify-center items-center",children:Object(N.jsx)("div",{className:"flex w-1/2 h-full items-center justify-center",children:Object(N.jsxs)("div",{className:"w-3/4",children:[Object(N.jsxs)("div",{className:"flex justify-center",children:[Object(N.jsx)(s.b,{to:"/join",className:"flex justify-end min-w-3/4 mr-6",children:Object(N.jsxs)("button",{className:"justify-center flex min-w-1/2 items-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full focus:outline-none",children:[Object(N.jsx)("svg",{width:"2em",height:"2em",viewBox:"0 0 24 24",children:Object(N.jsx)("path",{d:"M3.7 7.7a.996.996 0 0 1 1.41 0L12 14.59l4.29-4.3L14.7 8.7c-.62-.62-.18-1.7.71-1.7H20c.55 0 1 .45 1 1v4.59c0 .89-1.08 1.34-1.71.71l-1.59-1.59l-5 5a.996.996 0 0 1-1.41 0L3.7 9.11c-.38-.38-.38-1.02 0-1.41z",fill:"currentColor"})}),Object(N.jsx)("div",{children:"Join meeting"})]})}),Object(N.jsx)(s.b,{to:"/rooms/".concat(n),className:"flex justify-start min-w-3/4 ml-6",children:Object(N.jsxs)("button",{className:"justify-center focus:outline-none min-w-1/2 flex items-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",children:[Object(N.jsx)("svg",{width:"2em",height:"2em",viewBox:"0 0 24 24",children:Object(N.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",fill:"currentColor"})}),Object(N.jsx)("div",{children:Object(N.jsx)("div",{children:"Create a meeting"})})]})})]}),Object(N.jsx)("div",{className:"flex justify-center mt-6",children:Object(N.jsx)("div",{className:"text-white text-xl text hover:underline cursor-pointer",children:Object(N.jsx)("button",{className:"focus:outline-none",onClick:function(){return d(w())},children:"Logout"})})})]})})}):Object(N.jsx)(i.a,{to:"/login"})};var C=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],l=Object(c.useState)(""),u=Object(r.a)(l,2),d=u[0],b=u[1],j=Object(o.c)((function(e){return e.auth.isAuthenticated})),m=Object(o.b)();function x(e){"email"===e.target.id?a(e.target.value):b(e.target.value)}return j?Object(N.jsx)(i.a,{to:"/"}):Object(N.jsx)("div",{className:"w-full h-full bg-img-background bg-cover bg-no-repeat",children:Object(N.jsx)("div",{className:"w-full h-full flex justify-center items-center md:block",children:Object(N.jsx)("div",{className:"h-full md:w-1/3 w-3/4 min-w-min px-3 bg-white bg-opacity-50 shadow-2xl flex items-center justify-center",children:Object(N.jsx)("form",{className:"flex flex-col items-center justify-center sm:justify-start rounded",onSubmit:function(e){e.preventDefault(),m(O({email:n,password:d}))},children:Object(N.jsxs)("div",{className:"flex flex-col justify-center text-xl",children:[Object(N.jsx)("div",{className:"text-6xl md:text-4xl xl:text-5xl 2xl:text-7xl mb-12 flex justify-center",children:"Sign in"}),Object(N.jsxs)("div",{className:"mb-4",children:[Object(N.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"email",children:"Email"}),Object(N.jsx)("input",{className:"shadow text-lg appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",onChange:x,value:n})]}),Object(N.jsxs)("div",{className:"",children:[Object(N.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"password",children:"Password"}),Object(N.jsx)("input",{className:"shadow text-lg appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",onChange:x,value:d})]}),Object(N.jsxs)("div",{className:"flex text-xs xl:text-sm 2xl:text-base",children:[Object(N.jsx)("div",{className:"text-black text-opacity-60 mr-2",children:"If you don't have account ?"}),Object(N.jsx)("div",{children:Object(N.jsx)(s.b,{to:"/register",className:"text-blue-500",children:"Sign up"})})]}),Object(N.jsx)("div",{className:"flex items-center justify-center mt-2",children:Object(N.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Sign In"})})]})})})})})},S=n(35),A=n(25);var E=function(){var e=Object(c.useState)({}),t=Object(r.a)(e,2),n=t[0],a=t[1],l=Object(c.useState)(!1),o=Object(r.a)(l,2),u=o[0],d=o[1];function b(e){a(Object(A.a)(Object(A.a)({},n),{},Object(S.a)({},e.target.id,e.target.value)))}return u?Object(N.jsx)(i.a,{to:"/login"}):Object(N.jsx)("div",{className:"h-full bg-img-background bg-cover bg-no-repeat flex justify-center md:block",children:Object(N.jsx)("div",{className:"h-full w-3/4 md:w-1/3 items-center flex justify-center bg-white bg-opacity-50 shadow-2xl rounded px-4",children:Object(N.jsxs)("form",{className:"max-w-lg text-xl",autoComplete:"off",onSubmit:function(e){e.preventDefault(),f.post("/register",Object(A.a)({},n)).then((function(e){e.msg||d(!0)}))},children:[Object(N.jsx)("div",{className:"text-6xl md:text-4xl xl:text-5xl 2xl:text-7xl mb-12 flex justify-center",children:"Sign up"}),Object(N.jsxs)("div",{className:"mb-4",children:[Object(N.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"name",children:"Full name"}),Object(N.jsx)("input",{className:"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white",id:"name",type:"text",placeholder:"Name",onChange:b})]}),Object(N.jsxs)("div",{className:"mb-4",children:[Object(N.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"email",children:"Email"}),Object(N.jsx)("input",{className:"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white",id:"email",type:"email",placeholder:"Email",onChange:b})]}),Object(N.jsx)("div",{className:"flex flex-wrap -mx-3",children:Object(N.jsxs)("div",{className:"w-full px-3",children:[Object(N.jsx)("label",{className:"block tracking-wide text-gray-700 font-bold mb-2",htmlFor:"password",children:"Password"}),Object(N.jsx)("input",{className:"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",id:"password",type:"password",placeholder:"******************",onChange:b})]})}),Object(N.jsxs)("div",{className:"flex text-xs xl:text-sm 2xl:text-base mb-1",children:[Object(N.jsx)("div",{className:"text-black text-opacity-60 mr-2",children:"If you have account ?"}),Object(N.jsx)("div",{children:Object(N.jsx)(s.b,{to:"/login",className:"text-blue-500",children:"Login"})})]}),Object(N.jsx)("div",{className:"flex items-center justify-center",children:Object(N.jsx)("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Sign up"})})]})})})},M=n(60),I=n(59),L=n.n(I),z=n(61);var B=function(e){var t=e.room,n=e.socket,a=Object(c.useState)([]),l=Object(r.a)(a,2),s=l[0],i=l[1],u=Object(c.useState)(""),d=Object(r.a)(u,2),b=d[0],j=d[1],m=Object(o.c)((function(e){return e.auth.user}));return Object(c.useEffect)((function(){return n&&n.on("message",(function(e){i([].concat(Object(z.a)(s),[e]));var t=document.getElementById("messages");t.scrollTop=t.scrollHeight})),function(){null===n||void 0===n||n.off("message")}})),Object(N.jsxs)("div",{id:"messArea",className:"w-full",children:[Object(N.jsx)("div",{className:"h-full mx-2",children:Object(N.jsx)("div",{id:"messages",className:"h-full text-sm pt-2 overflow-y-auto no-scrollbar",children:Object(N.jsx)("div",{className:"",children:null===s||void 0===s?void 0:s.map((function(e,t){return function(e,t){return"Admin"!==e.name?Object(N.jsx)("div",{className:e.name===m.name?"flex justify-end":"flex justify-start",children:Object(N.jsxs)("div",{className:e.name===m.name?"w-auto max-w-full inline-block p-2 rounded-xl bg-blue-500 my-1 text-white":"w-auto max-w-full inline-block p-2 rounded-xl bg-gray-400 my-1",children:[Object(N.jsx)("p",{className:"text-xs font-bold w-auto max-w-full",children:e.name}),Object(N.jsx)("p",{className:"w-auto max-w-full",children:e.msg})]},t)},t):Object(N.jsx)("div",{className:"flex justify-center text-gray-400",children:e.msg},t)}(e,t)}))})})}),Object(N.jsx)("div",{className:"fixed bottom-0 w-1/4 h-16 bg-white",children:Object(N.jsxs)("form",{className:"w-full h-full flex border-t py-2 items-center justify-between",onSubmit:function(e){e.preventDefault(),b&&n&&(n.emit("sendMessage",{name:m.name,msg:b,room:t}),j(""))},children:[Object(N.jsx)("div",{className:"h-full w-10/12 p-2 flex items-center",children:Object(N.jsx)("input",{type:"text",name:"message",autoComplete:"off",placeholder:"Enter message ...",value:b,onChange:function(e){e.preventDefault(),j(e.target.value)},className:"h-full w-full text-xs no-scrollbar resize-none outline-none border-gray-400 border rounded-lg p-2"})}),Object(N.jsx)("div",{className:"h-full flex items-center w-2/12 mr-2 py-2",children:Object(N.jsx)("button",{type:"submit",className:"focus:outline-none px-2 py-1 bg-blue-700 text-white rounded-lg",children:"Send"})})]})})]})};var D=function(){var e=Object(o.c)((function(e){return e.auth.loading})),t=Object(o.c)((function(e){return e.auth.isAuthenticated})),n=Object(c.useState)(Object(i.g)().id),a=Object(r.a)(n,1)[0],l=Object(o.c)((function(e){return e.auth.user})),s=Object(c.useState)(null),u=Object(r.a)(s,2),d=u[0],b=u[1],j=Object(c.useState)((function(){return Object(M.a)("https://room-call-chat-app.herokuapp.com",{transports:["websocket"],upgrade:!1})})),m=Object(r.a)(j,1)[0],x=Object(c.useState)(),h=Object(r.a)(x,2),f=h[0],g=h[1],p=Object(c.useState)([]),O=Object(r.a)(p,2),v=O[0],w=O[1],y=Object(c.useState)((function(){return new L.a({config:{iceServers:[{urls:["stun:hk-turn1.xirsys.com"]},{username:"WPdqH78AUMRJkyQMCcH9Ihh3Bkkr6nVBF4OpY6rd8MwQCaiMoNyPuNDe0-7qTkbcAAAAAGE6K6RsZXRoYW5odmlldA==",credential:"afc7aa28-1184-11ec-8e6d-0242ac120004",urls:["turn:hk-turn1.xirsys.com:80?transport=udp","turn:hk-turn1.xirsys.com:3478?transport=udp","turn:hk-turn1.xirsys.com:80?transport=tcp","turn:hk-turn1.xirsys.com:3478?transport=tcp","turns:hk-turn1.xirsys.com:443?transport=tcp","turns:hk-turn1.xirsys.com:5349?transport=tcp"]}]}})})),k=Object(r.a)(y,1)[0];if(Object(c.useEffect)((function(){null===k||void 0===k||k.on("open",(function(e){g(e),m.emit("joinRoom",{name:null===l||void 0===l?void 0:l.name,room:a,peerID:e}),m.on("allMembers",(function(t){var n=document.getElementById("videoContainer");n&&(n.innerHTML=""),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(n){null===d||void 0===d||d.getTracks().forEach((function(e){return e.stop()})),b(n),n._id=e,S(e,n,!0),t.forEach((function(t){if(t!==e){var c=k.call(t,n);null===c||void 0===c||c.on("stream",(function(e){S(t,e)}))}})),C(t)})),k.on("call",(function(e){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(n){e.answer(n),null===e||void 0===e||e.on("stream",(function(e){null!==e&&void 0!==e&&e._id&&S(null===e||void 0===e?void 0:e._id,e)})),C(t)}))})),w(t)}))}))}),[m,a,l,k,v,d]),Object(c.useEffect)((function(){return function(){null===m||void 0===m||m.emit("peerClose",{peerId:f})}}),[m,f]),!t&&!e)return Object(N.jsx)(i.a,{to:"/login"});function C(e){var t=document.getElementById("videoContainer");if(t)for(var n=[],c=0;c<t.childNodes.length;c++)e.includes(t.childNodes[c].id)||n.push(t.childNodes[c])}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!document.getElementById(e)){var c=document.createElement("video"),a=document.createElement("div"),l=document.getElementById("videoContainer");a.className="max-w-full min-w-min flex justify-center items-center",c.srcObject=t,n&&(c.muted="muted"),a.id=e;var s=c.play();void 0!==s&&s.then((function(e){})).catch((function(e){console.log(e)})),a.appendChild(c),l&&l.appendChild(a)}}return Object(N.jsxs)("div",{className:"w-full h-full flex",children:[Object(N.jsx)("div",{className:"w-full sm:w-3/4 h-full no-scrollbar grid grid-cols-2 gap-2 overflow-y-scroll bg-black bg-opacity-90 p-2",id:"videoContainer"}),Object(N.jsxs)("div",{className:"w-1/4 hidden sm:block h-full border-l border-gray-300",children:[Object(N.jsxs)("div",{className:"w-full h-16 flex justify-around items-center border-b",children:[Object(N.jsxs)("button",{className:"flex flex-col justify-center items-center p-1 rounded-lg hover:bg-blue-100",children:[Object(N.jsx)("div",{children:Object(N.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",children:[Object(N.jsx)("path",{opacity:".3",d:"M20 16V6H4v10.01L20 16zm-7-1.53v-2.19c-2.78 0-4.61.85-6 2.72c.56-2.67 2.11-5.33 6-5.87V7l4 3.73l-4 3.74z",fill:"currentColor"}),Object(N.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zM4 16V6h16v10.01L4 16zm9-6.87c-3.89.54-5.44 3.2-6 5.87c1.39-1.87 3.22-2.72 6-2.72v2.19l4-3.74L13 7v2.13z",fill:"currentColor"})]})}),Object(N.jsx)("div",{className:"text-xs",children:"Screen"})]}),Object(N.jsxs)("button",{className:"flex flex-col justify-center items-center p-1 rounded-lg hover:bg-blue-100",children:[Object(N.jsx)("div",{children:Object(N.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 256 256",children:Object(N.jsx)("path",{d:"M213.382 221.92a8.002 8.002 0 0 1-11.302-.538l-26.46-29.106A79.72 79.72 0 0 1 136 207.59V232a8 8 0 0 1-16 0v-24.403a79.837 79.837 0 0 1-71.512-70.718a8 8 0 0 1 15.903-1.758a63.992 63.992 0 0 0 100.396 45.238l-10.875-11.962A47.99 47.99 0 0 1 80 128V87.094L42.08 45.382a8 8 0 1 1 11.84-10.764l160 176a8.002 8.002 0 0 1-.538 11.302zm-51.302-92.11A8 8 0 0 0 176 124.43V64a48.005 48.005 0 0 0-88.845-25.225a8.001 8.001 0 0 0 .884 9.591zm30.085 31.855a7.993 7.993 0 0 0 10.364-4.536a79.616 79.616 0 0 0 4.983-20.25a8 8 0 0 0-15.903-1.758a63.674 63.674 0 0 1-3.98 16.18a8 8 0 0 0 4.536 10.364z",fill:"currentColor"})})}),Object(N.jsx)("div",{className:"text-xs",children:"Micro"})]}),Object(N.jsxs)("button",{className:"flex flex-col justify-center items-center p-1 rounded-lg hover:bg-blue-100",children:[Object(N.jsx)("div",{children:Object(N.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",children:Object(N.jsx)("path",{d:"M12 2a7 7 0 0 1 7 7a7 7 0 0 1-7 7a7 7 0 0 1-7-7a7 7 0 0 1 7-7m0 2a5 5 0 0 0-5 5a5 5 0 0 0 5 5a5 5 0 0 0 5-5a5 5 0 0 0-5-5m0 2a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3M6 22a2 2 0 0 1-2-2c0-.38.1-.73.29-1.03l1.82-3.16A9.007 9.007 0 0 0 12 18c2.25 0 4.31-.83 5.89-2.19l1.82 3.16c.19.3.29.65.29 1.03a2 2 0 0 1-2 2H6z",fill:"currentColor"})})}),Object(N.jsx)("div",{className:"text-xs",children:"Webcam"})]})]}),Object(N.jsx)(B,{room:a,socket:m})]})]})};var H=function(){var e=Object(c.useState)(),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(N.jsx)("div",{className:"w-full h-full flex justify-center items-center bg-img-background bg-cover bg-no-repeat",children:Object(N.jsx)("div",{children:Object(N.jsx)("div",{children:Object(N.jsxs)("form",{children:[Object(N.jsx)("input",{name:"id",type:"text",onChange:function(e){e.preventDefault(),a(e.target.value)},placeholder:"Enter room's id ...",className:"rounded-lg p-2 focus:outline-none"}),Object(N.jsx)(s.b,{to:"/rooms/".concat(n),children:Object(N.jsx)("button",{type:"submit",className:"bg-blue-500 text-white ml-4 text-lg py-2 px-3 rounded-xl",children:"JOIN"})})]})})})})};var F=function(){return Object(N.jsx)("div",{className:"w-full h-full flex justify-center items-center text-white bg-img-background bg-cover bg-no-repeat",children:Object(N.jsx)("div",{children:Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"animate-spin iconify iconify--mdi-light",width:"200",height:"200",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",children:Object(N.jsx)("path",{d:"M11.5 4A8.5 8.5 0 0 0 3 12.5H2A9.5 9.5 0 0 1 11.5 3v1z",fill:"currentColor"})})})})};var T=function(){var e=Object(o.c)((function(e){return e.auth.loading})),t=Object(o.b)(),n=Object(c.useState)(!0),a=Object(r.a)(n,2),l=a[0],s=a[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("token");g(e),t(p()),s(!1)}),[t]),e||l?Object(N.jsx)(F,{}):Object(N.jsx)("div",{className:"App h-full font-custom",children:Object(N.jsxs)(i.d,{children:[Object(N.jsx)(i.b,{path:"/login",exact:!0,component:C}),Object(N.jsx)(i.b,{path:"/register",exact:!0,component:E}),Object(N.jsx)(i.b,{path:"/rooms/:id",component:D}),Object(N.jsx)(i.b,{path:"/join",exact:!0,component:H}),Object(N.jsx)(i.b,{path:"/",exact:!0,component:k})]})})},U=Object(m.a)({reducer:{auth:y},middleware:Object(m.d)({serializableCheck:!1}),devTools:!1});l.a.render(Object(N.jsx)(s.a,{children:Object(N.jsx)(o.a,{store:U,children:Object(N.jsx)(T,{})})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.b6a7e02e.chunk.js.map