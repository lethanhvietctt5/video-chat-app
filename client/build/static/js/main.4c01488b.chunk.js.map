{"version":3,"sources":["../node_modules/peerjs/dist sync","api/index.js","api/token.js","redux/slices/auth.js","components/Home.jsx","components/Login.jsx","components/Register.jsx","components/Message.jsx","components/Room.jsx","components/Join.jsx","components/Loading.jsx","App.js","redux/store.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","api","axios","create","baseURL","process","headers","interceptors","response","use","res","err","status","Promise","reject","setToken","token","defaults","common","localStorage","setItem","removeItem","fetchUser","createAsyncThunk","a","get","data","userLogin","email","password","post","authSlice","createSlice","name","initialState","isAuthenticated","user","loading","reducers","authLogout","state","action","extraReducers","builder","addCase","pending","fulfilled","payload","message","rejected","actions","Home","useState","setId","useSelector","auth","dispatch","useDispatch","useEffect","uuidv4","className","to","width","height","viewBox","d","fill","onClick","Login","setEmail","setPassword","authStatus","handleOnChange","event","target","value","onSubmit","preventDefault","htmlFor","type","placeholder","onChange","Register","form","setForm","regSucceed","setRegSuccess","handleChange","autoComplete","then","msg","Message","room","socket","messages","setMessages","setMessage","on","element","document","getElementById","scrollTop","scrollHeight","off","map","item","index","renderMessage","emit","Room","loadingStatus","useParams","io","transports","upgrade","peerId","setPeerId","members","setMembers","Peer","config","iceServers","urls","username","credential","peer","peerID","userPeers","videos","innerHTML","navigator","mediaDevices","getUserMedia","video","audio","stream","playStream","forEach","member","call","remoteStream","updateStream","answer","arr","i","childNodes","length","includes","push","console","log","removeChild","isLocal","createElement","div","srcObject","muted","playPromise","play","undefined","_","catch","error","appendChild","Join","Loading","xmlns","xlink","aria-hidden","role","preserveAspectRatio","App","checkBeforeRender","setCheckBeforeRender","getItem","path","exact","component","store","configureStore","reducer","authReducer","middleware","getDefaultMiddleware","serializableCheck","ReactDOM","render"],"mappings":"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","file":"static/js/main.4c01488b.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 127;","import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_HOST_URL,\n  headers: { \"Content-Type\": \"application/json; charset=UTF-8\" },\n});\n\napi.interceptors.response.use(\n  (res) => res,\n  (err) => {\n    if (err.response.status === 401) {\n      // store.dispatch({ type: LOGOUT });\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default api;\n","import api from \"./index\";\n\nconst setToken = (token) => {\n  if (token) {\n    api.defaults.headers.common[\"x-auth-token\"] = token;\n    localStorage.setItem(\"token\", token);\n  } else {\n    delete api.defaults.headers.common[\"x-auth-token\"];\n    localStorage.removeItem(\"token\");\n  }\n};\n\nconst getToken = () => {\n  return localStorage.getItem(\"token\");\n};\n\nexport { setToken, getToken };\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"api\";\nimport { setToken } from \"api/token\";\n\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  loading: false,\n};\n\nexport const fetchUser = createAsyncThunk(\"auth/fetchUser\", async () => {\n  const response = await api.get(\"/auth\");\n  return response.data;\n});\n\nexport const userLogin = createAsyncThunk(\n  \"auth/userLogin\",\n  async ({ email, password }) => {\n    const response = await api.post(\"/login\", { email, password });\n    return response.data;\n  }\n);\n\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    authLogout(state, action) {\n      state.loading = false;\n      state.isAuthenticated = false;\n      state.user = null;\n      setToken(\"\");\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchUser.pending, (state, action) => {\n        state.loading = true;\n        state.isAuthenticated = false;\n      })\n      .addCase(fetchUser.fulfilled, (state, action) => {\n        state.loading = false;\n        if (!action.payload.message) {\n          state.isAuthenticated = true;\n          state.user = action.payload;\n        }\n      })\n      .addCase(fetchUser.rejected, (state, action) => {\n        state.loading = false;\n      })\n      .addCase(userLogin.pending, (state, action) => {\n        state.loading = true;\n      })\n      .addCase(userLogin.fulfilled, (state, action) => {\n        state.loading = false;\n        if (action.payload) {\n          setToken(action.payload.token);\n          state.user = action.payload.user;\n          state.isAuthenticated = true;\n        }\n      })\n      .addCase(userLogin.rejected, (state, action) => {\n        state.loading = false;\n      });\n  },\n});\n\nexport const { authLogout } = authSlice.actions;\n\nexport default authSlice.reducer;\n","import { Link, Redirect } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useEffect, useState } from \"react\";\nimport { authLogout } from \"redux/slices/auth\";\n\nfunction Home() {\n  let [id, setId] = useState();\n  const user = useSelector((state) => state.auth.user);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    setId(uuidv4());\n  }, []);\n\n  if (!user) return <Redirect to=\"/login\" />;\n\n  return (\n    <div className=\"flex h-full bg-img-background bg-cover bg-no-repeat w-full justify-center items-center\">\n      <div className=\"flex w-1/2 h-full items-center justify-center\">\n        <div className=\"w-3/4\">\n          <div className=\"flex justify-center\">\n            <Link to={`/join`} className=\"flex justify-end min-w-3/4 mr-6\">\n              <button className=\"justify-center flex min-w-1/2 items-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full focus:outline-none\">\n                <svg width=\"2em\" height=\"2em\" viewBox=\"0 0 24 24\">\n                  <path\n                    d=\"M3.7 7.7a.996.996 0 0 1 1.41 0L12 14.59l4.29-4.3L14.7 8.7c-.62-.62-.18-1.7.71-1.7H20c.55 0 1 .45 1 1v4.59c0 .89-1.08 1.34-1.71.71l-1.59-1.59l-5 5a.996.996 0 0 1-1.41 0L3.7 9.11c-.38-.38-.38-1.02 0-1.41z\"\n                    fill=\"currentColor\"\n                  ></path>\n                </svg>\n                <div>Join meeting</div>\n              </button>\n            </Link>\n\n            <Link\n              to={`/rooms/${id}`}\n              className=\"flex justify-start min-w-3/4 ml-6\"\n            >\n              <button className=\"justify-center focus:outline-none min-w-1/2 flex items-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\">\n                <svg width=\"2em\" height=\"2em\" viewBox=\"0 0 24 24\">\n                  <path\n                    d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n                    fill=\"currentColor\"\n                  ></path>\n                </svg>\n                <div>\n                  <div>Create a meeting</div>\n                </div>\n              </button>\n            </Link>\n          </div>\n\n          <div className=\"flex justify-center mt-6\">\n            <div className=\"text-white text-xl text hover:underline cursor-pointer\">\n              <button\n                className=\"focus:outline-none\"\n                onClick={() => dispatch(authLogout())}\n              >\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n","import { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Redirect } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { userLogin } from \"redux/slices/auth\";\n\nfunction Login() {\n  let [email, setEmail] = useState(\"\");\n  let [password, setPassword] = useState(\"\");\n\n  const authStatus = useSelector((state) => state.auth.isAuthenticated);\n  const dispatch = useDispatch();\n\n  function handleOnChange(event) {\n    if (event.target.id === \"email\") setEmail(event.target.value);\n    else setPassword(event.target.value);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    dispatch(userLogin({ email, password }));\n  }\n\n  if (authStatus) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <div className=\"w-full h-full bg-img-background bg-cover bg-no-repeat\">\n      <div className=\"w-full h-full flex justify-center items-center md:block\">\n        <div className=\"h-full md:w-1/3 w-3/4 min-w-min px-3 bg-white bg-opacity-50 shadow-2xl flex items-center justify-center\">\n          <form\n            className=\"flex flex-col items-center justify-center sm:justify-start rounded\"\n            onSubmit={handleSubmit}\n          >\n            <div className=\"flex flex-col justify-center text-xl\">\n              <div className=\"text-6xl md:text-4xl xl:text-5xl 2xl:text-7xl mb-12 flex justify-center\">\n                Sign in\n              </div>\n              <div className=\"mb-4\">\n                <label\n                  className=\"block text-gray-700 font-bold mb-2\"\n                  htmlFor=\"email\"\n                >\n                  Email\n                </label>\n                <input\n                  className=\"shadow text-lg appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                  id=\"email\"\n                  type=\"text\"\n                  placeholder=\"Email\"\n                  onChange={handleOnChange}\n                  value={email}\n                />\n              </div>\n              <div className=\"\">\n                <label\n                  className=\"block text-gray-700 font-bold mb-2\"\n                  htmlFor=\"password\"\n                >\n                  Password\n                </label>\n                <input\n                  className=\"shadow text-lg appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"******************\"\n                  onChange={handleOnChange}\n                  value={password}\n                />\n              </div>\n              <div className=\"flex text-xs xl:text-sm 2xl:text-base\">\n                <div className=\"text-black text-opacity-60 mr-2\">\n                  If you don't have account ?\n                </div>\n                <div>\n                  <Link to=\"/register\" className=\"text-blue-500\">\n                    Sign up\n                  </Link>\n                </div>\n              </div>\n              <div className=\"flex items-center justify-center mt-2\">\n                <button\n                  className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n                  type=\"submit\"\n                >\n                  Sign In\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n","import { Link, Redirect } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport api from \"api\";\n\nfunction Register() {\n  let [form, setForm] = useState({});\n  const [regSucceed, setRegSuccess] = useState(false);\n\n  function handleChange(e) {\n    setForm({ ...form, [e.target.id]: e.target.value });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    api.post(\"/register\", { ...form }).then((response) => {\n      if (response.msg) {\n      } else {\n        setRegSuccess(true);\n      }\n    });\n  }\n\n  if (regSucceed) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n    <div className=\"h-full bg-img-background bg-cover bg-no-repeat flex justify-center md:block\">\n      <div className=\"h-full w-3/4 md:w-1/3 items-center flex justify-center bg-white bg-opacity-50 shadow-2xl rounded px-4\">\n        <form className=\"max-w-lg text-xl\" autoComplete=\"off\" onSubmit={handleSubmit}>\n          <div className=\"text-6xl md:text-4xl xl:text-5xl 2xl:text-7xl mb-12 flex justify-center\">\n            Sign up\n          </div>\n\n          <div className=\"mb-4\">\n            <label\n              className=\"block text-gray-700 font-bold mb-2\"\n              htmlFor=\"name\"\n            >\n              Full name\n            </label>\n            <input\n              className=\"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white\"\n              id=\"name\"\n              type=\"text\"\n              placeholder=\"Name\"\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"mb-4\">\n            <label\n              className=\"block text-gray-700 font-bold mb-2\"\n              htmlFor=\"email\"\n            >\n              Email\n            </label>\n            <input\n              className=\"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white\"\n              id=\"email\"\n              type=\"text\"\n              placeholder=\"Email\"\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"flex flex-wrap -mx-3\">\n            <div className=\"w-full px-3\">\n              <label\n                className=\"block tracking-wide text-gray-700 font-bold mb-2\"\n                htmlFor=\"password\"\n              >\n                Password\n              </label>\n              <input\n                className=\"text-lg appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white\"\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"******************\"\n                onChange={handleChange}\n              />\n            </div>\n          </div>\n\n          <div className=\"flex text-xs xl:text-sm 2xl:text-base mb-1\">\n            <div className=\"text-black text-opacity-60 mr-2\">\n              If you have account ?\n            </div>\n            <div>\n              <Link to=\"/login\" className=\"text-blue-500\">\n                Login\n              </Link>\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-center\">\n            <button\n              className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n              type=\"submit\"\n            >\n              Sign up\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default Register;\n","import { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\n\nfunction Message({ room, socket }) {\n  let [messages, setMessages] = useState([]);\n  let [message, setMessage] = useState(\"\");\n  const user = useSelector((state) => state.user);\n\n  useEffect(() => {\n    if (socket) {\n      socket.on(\"message\", (message) => {\n        setMessages([...messages, message]);\n        let element = document.getElementById(\"messages\");\n        element.scrollTop = element.scrollHeight;\n      });\n    }\n\n    return () => {\n      socket?.off(\"message\");\n    };\n  });\n\n  function handleInput(e) {\n    e.preventDefault();\n    setMessage(e.target.value);\n  }\n\n  function handleSendMessage(e) {\n    e.preventDefault();\n    if (message && socket) {\n      socket.emit(\"sendMessage\", { name: user.name, msg: message, room });\n      setMessage(\"\");\n    }\n  }\n\n  function renderMessage(item, index) {\n    if (item.name !== \"Admin\")\n      return (\n        <div\n          className={\n            item.name === user.name ? \"flex justify-end\" : \"flex justify-start\"\n          }\n        >\n          <div\n            key={index}\n            className={\n              item.name === user.name\n                ? \"w-auto max-w-full inline-block p-2 rounded-xl bg-blue-500 my-1 text-white\"\n                : \"w-auto max-w-full inline-block p-2 rounded-xl bg-gray-400 my-1\"\n            }\n          >\n            <p className=\"text-xs font-bold w-auto max-w-full\">{item.name}</p>\n            <p className=\"w-auto max-w-full\">{item.msg}</p>\n          </div>\n        </div>\n      );\n    return (\n      <div key={index} className=\"flex justify-center text-gray-400\">\n        {item.msg}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full w-full\">\n      <div className=\"h-full mx-2\">\n        <div\n          id=\"messages\"\n          className=\"h-full pb-16 text-sm pt-2 overflow-y-auto no-scrollbar\"\n        >\n          <div className=\"\">\n            {messages?.map((item, index) => renderMessage(item, index))}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"fixed bottom-0 w-1/4 bg-white\">\n        <form\n          className=\"h-16 w-full flex border-t p-2 items-center justify-center\"\n          onSubmit={handleSendMessage}\n        >\n          <div className=\"h-full w-11/12 p-1 flex items-center\">\n            <input\n              type=\"text\"\n              name=\"message\"\n              autoComplete=\"off\"\n              placeholder=\"Ab\"\n              value={message}\n              onChange={handleInput}\n              className=\"h-full w-full text-xs no-scrollbar resize-none outline-none border-gray-400 border rounded-full p-2\"\n            />\n          </div>\n          <div className=\"h-full flex items-center w-1/12 text-2xl mr-2\">\n            <button type=\"submit\" className=\"focus:outline-none\">\n              <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 15 15\">\n                <g fill=\"none\">\n                  <path\n                    d=\"M14.5.5l.46.197a.5.5 0 0 0-.657-.657L14.5.5zm-14 6l-.197-.46a.5.5 0 0 0-.06.889L.5 6.5zm8 8l-.429.257a.5.5 0 0 0 .889-.06L8.5 14.5zM14.303.04l-14 6l.394.92l14-6l-.394-.92zM.243 6.93l5 3l.514-.858l-5-3l-.514.858zM5.07 9.757l3 5l.858-.514l-3-5l-.858.514zm3.889 4.94l6-14l-.92-.394l-6 14l.92.394zM14.146.147l-9 9l.708.707l9-9l-.708-.708z\"\n                    fill=\"currentColor\"\n                  ></path>\n                </g>\n              </svg>\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default Message;\n","import { useParams } from \"react-router\";\nimport { Redirect } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"peerjs\";\nimport Message from \"components/Message\";\n\nconst END_POINT = process.env.REACT_APP_HOST_URL;\n\nfunction Room() {\n  const loadingStatus = useSelector((state) => state.auth.loading);\n  const authStatus = useSelector((state) => state.auth.isAuthenticated);\n  const [room] = useState(useParams().id);\n  const user = useSelector((state) => state.auth.user);\n\n  const [socket] = useState(() =>\n    io(END_POINT, {\n      transports: [\"websocket\"],\n      upgrade: false,\n    })\n  );\n  const [peerId, setPeerId] = useState();\n  const [members, setMembers] = useState([]);\n  const [peer] = useState(\n    () =>\n      new Peer({\n        config: {\n          iceServers: [\n            { urls: [process.env.REACT_APP_ICE_URL] },\n            {\n              username: process.env.REACT_APP_ICE_USER,\n              credential: process.env.REACT_APP_ICE_CREDENTIALS,\n              urls: [\n                \"turn:ss-turn1.xirsys.com:80?transport=udp\",\n                \"turn:ss-turn1.xirsys.com:3478?transport=udp\",\n                \"turn:ss-turn1.xirsys.com:80?transport=tcp\",\n                \"turn:ss-turn1.xirsys.com:3478?transport=tcp\",\n                \"turns:ss-turn1.xirsys.com:443?transport=tcp\",\n                \"turns:ss-turn1.xirsys.com:5349?transport=tcp\",\n              ],\n            },\n          ],\n        },\n      })\n  );\n\n  useEffect(() => {\n    peer?.on(\"open\", (id) => {\n      setPeerId(id);\n      socket.emit(\"joinRoom\", { name: user?.name, room, peerID: id });\n\n      socket.on(\"allMembers\", (userPeers) => {\n        let videos = document.getElementById(\"videoContainer\");\n        if (videos) videos.innerHTML = \"\";\n        navigator.mediaDevices\n          .getUserMedia({ video: true, audio: true })\n          .then((stream) => {\n            playStream(id, stream, true);\n            userPeers.forEach((member) => {\n              if (member !== id) {\n                let call = peer.call(member, stream);\n                call?.on(\"stream\", (remoteStream) => {\n                  playStream(member, remoteStream);\n                });\n              }\n            });\n            updateStream(userPeers);\n          });\n\n        // Answer\n        peer.on(\"call\", (call) => {\n          if (videos) videos.innerHTML = \"\";\n          navigator.mediaDevices\n            .getUserMedia({ video: true, audio: true })\n            .then((stream) => {\n              call.answer(stream);\n              playStream(id, stream, true);\n              userPeers.forEach((member) => {\n                if (member !== id) {\n                  call?.on(\"stream\", (remoteStream) => {\n                    playStream(member, remoteStream);\n                  });\n                }\n              });\n              updateStream(userPeers);\n            });\n        });\n\n        setMembers(userPeers);\n      });\n    });\n  }, [socket, room, user, peer, members]);\n\n  useEffect(() => {\n    return () => {\n      socket?.emit(\"peerClose\", { peerId });\n    };\n  }, [socket, peerId]);\n\n  useEffect(() => {\n    updateStream(members);\n  }, [members]);\n\n  if (!authStatus && !loadingStatus) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  function updateStream(userPeers) {\n    let videos = document.getElementById(\"videoContainer\");\n    let arr = [];\n    for (let i = 0; i < videos.childNodes.length; i++) {\n      if (!userPeers.includes(videos.childNodes[i].id)) {\n        arr.push(videos.childNodes[i]);\n      }\n      console.log(arr);\n    }\n\n    arr.forEach((video) => {\n      videos.removeChild(video);\n    });\n  }\n\n  function playStream(id, stream, isLocal = false) {\n    if (!document.getElementById(id)) {\n      let video = document.createElement(\"video\");\n      let div = document.createElement(\"div\");\n      let videos = document.getElementById(\"videoContainer\");\n\n      div.className = \"max-w-full min-w-min flex justify-center items-center\";\n      video.srcObject = stream;\n      if (isLocal) {\n        video.muted = \"muted\";\n      }\n      div.id = id;\n      var playPromise = video.play();\n      if (playPromise !== undefined) {\n        playPromise\n          .then((_) => {})\n          .catch((error) => {\n            console.log(error);\n          });\n      }\n      div.appendChild(video);\n      if (videos) videos.appendChild(div);\n    }\n  }\n\n  return (\n    <div className=\"w-full h-full flex\">\n      <div\n        className=\"w-full sm:w-3/4 h-full no-scrollbar grid grid-cols-2 gap-2 overflow-y-scroll bg-black bg-opacity-90 p-2\"\n        id=\"videoContainer\"\n      ></div>\n      <div className=\"w-1/4 hidden sm:block h-full border-l border-gray-300\">\n        <Message room={room} socket={socket} />\n      </div>\n    </div>\n  );\n}\n\nexport default Room;\n","import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Join() {\n  let [id, setId] = useState();\n\n  function handleChange(e) {\n    e.preventDefault();\n    setId(e.target.value);\n  }\n\n  return (\n    <div className=\"w-full h-full flex justify-center items-center bg-img-background bg-cover bg-no-repeat\">\n      <div>\n        <div className=\"text-white text-5xl mb-4\">Join A Room</div>\n        <div>\n          <form>\n            <input\n              name=\"id\"\n              type=\"text\"\n              value={id}\n              onChange={handleChange}\n              placeholder=\"Enter room's id ...\"\n              className=\"rounded-lg p-4 focus:outline-none\"\n            />\n            <Link to={`/rooms/${id}`}>\n              <button\n                type=\"submit\"\n                className=\"bg-blue-500 text-white ml-4 text-xl p-2 rounded-xl\"\n              >\n                JOIN\n              </button>\n            </Link>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Join;\n","function Loading() {\n  return (\n    <div className=\"w-full h-full flex justify-center items-center text-white bg-img-background bg-cover bg-no-repeat\">\n      <div>\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xlink=\"http://www.w3.org/1999/xlink\"\n          aria-hidden=\"true\"\n          role=\"img\"\n          className=\"animate-spin iconify iconify--mdi-light\"\n          width=\"200\"\n          height=\"200\"\n          preserveAspectRatio=\"xMidYMid meet\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            d=\"M11.5 4A8.5 8.5 0 0 0 3 12.5H2A9.5 9.5 0 0 1 11.5 3v1z\"\n            fill=\"currentColor\"\n          ></path>\n        </svg>\n      </div>\n    </div>\n  );\n}\n\nexport default Loading;\n","import { Route, Switch } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Home from \"components/Home\";\nimport Login from \"components/Login\";\nimport Register from \"components/Register\";\nimport Room from \"components/Room\";\nimport Join from \"components/Join\";\nimport { setToken, getToken } from \"api/token\";\nimport { useEffect, useState } from \"react\";\nimport { fetchUser } from \"redux/slices/auth\";\nimport Loading from \"components/Loading\";\n\nfunction App() {\n  const loading = useSelector((state) => state.auth.loading);\n  const dispatch = useDispatch();\n  const [checkBeforeRender, setCheckBeforeRender] = useState(true);\n\n  useEffect(() => {\n    let token = getToken();\n    setToken(token);\n    dispatch(fetchUser());\n    setCheckBeforeRender(false);\n  }, [dispatch]);\n\n  if (loading || checkBeforeRender) {\n    return <Loading />;\n  }\n\n  return (\n    <div className=\"App h-full font-custom\">\n      <Switch>\n        <Route path=\"/login\" exact component={Login} />\n        <Route path=\"/register\" exact component={Register} />\n        <Route path=\"/rooms/:id\" component={Room} />\n        <Route path=\"/join\" exact component={Join} />\n        <Route path=\"/\" exact component={Home} />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { getDefaultMiddleware } from \"@reduxjs/toolkit\";\nimport authReducer from \"./slices/auth\";\n\nconst store = configureStore({\n  reducer: {\n    auth: authReducer,\n  },\n  middleware: getDefaultMiddleware({\n    serializableCheck: false,\n  }),\n});\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"redux/store\";\nimport { Provider } from \"react-redux\";\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}